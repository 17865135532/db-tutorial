# Mysql 入门

## 逻辑架构

![img](http://dunwu.test.upcdn.net/snap/20200229184651.png)

MySQL 逻辑架构整体分为三层，最上层为客户端层，并非 MySQL 所独有，诸如：连接处理、授权认证、安全等功能均在这一层处理。

MySQL 大多数核心服务均在中间这一层，包括查询解析、分析、优化、缓存、内置函数(比如：时间、数学、加密等函数)。所有的跨存储引擎的功能也在这一层实现：存储过程、触发器、视图等。

最下层为存储引擎，其负责 MySQL 中的数据存储和提取。和 Linux 下的文件系统类似，每种存储引擎都有其优势和劣势。中间的服务层通过 API 与存储引擎通信，这些 API 接口屏蔽了不同存储引擎间的差异。

## 并发控制

### 读写锁

共享锁不会互相阻塞；

独享锁是排它的。

### 锁粒度

锁定内容越少，并发度就越高，因为加锁会阻塞其他线程操作。

Mysql 的存储引擎一般都支持表级锁和行级锁。

### MVCC

## 事务

事务就是一组原子性的 SQL 语句。事务内的 SQL 语句，要么全执行成功，要么全执行失败。

### ACID

事务的 ACID 特性：

- **原子性（Atomicity）**
- **一致性（Consistency）**
- **隔离性（Isolation）**
- **持久性（Durability）**

在 Mysql 的存储引擎中，对于事务的支持各不相同。如 InnoDB 事务处理能力很强，MyISAM 不支持事务。

### 隔离级别

## 参考资料

- [《高性能 MySQL》](https://book.douban.com/subject/23008813/)

